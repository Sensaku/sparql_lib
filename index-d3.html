<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--<script src="https://d3js.org/d3.v7.min.js" defer></script>-->
    <script src="https://cdn.jsdelivr.net/npm/d3@7/+esm" type="module" defer></script>
    <script src="d3_graph1.js" defer type="module"></script>
    <script src="d3_graph2.js" defer type="module">

    </script>
    <title>Document</title>
</head>
<body>
    <h1>
        Introduction à d3.js
    </h1>
    <p>
        Cette page a pour objectif d'introduire ses lecteurs à la librairie d3.js de javascript. Pour ce faire, je vais faire une rapide présentation de d3.js, puis montrer différents graphiques réalisés à l'aide de d3.js. <br>
        <br>
        d3.js est donc une librairie de javascript, qui utilise également html et css. Elle a été créée en 2011, et a pour objectif de transformer des données en graphiques SVG. Ces graphiques peuvent être rendus interactifs avec des labels et contrôles, et lors de changement de données, les points du graphiques se déplacent vers leurs nouvelles positions.
        Les données utilisées par d3.js peuvent soit être créées sur le fichier javascript, soit êtres tirées d'un dossier sur l'ordinateur (csv, json, etc...), soit être cherchées avec des API.
        <br> <br>
    </p>
    <div id="svg_wrapper" style="white-space: nowrap;">
        <svg id="d3_demo", style="display:inline"></svg>
        <svg id="d3_demo_bis", style="display:inline"></svg>
    </div>

</body>
<script type="module" defer>
    /*d3.csv("C:/Users/hcarton/Documents/STID/stid_3eme_annee/Maths/DonnéesMaladieVsAge.csv").then(
        ({donnees}) => {
            d3.select(".d3_row").selectAll("p").data(donnees).join("p").text((d) => d.name = +d.Age)
        }
    ) // Importation des données
    const width = max(donnees), height = 500
    const x_scale = d3.scaleBand().range([min(donnees), max(donnees)])
    const y_scale = d3.scaleLinear().range([height, 0])
    const svg = d3.select("#d3_demo").attr("width", width).attr("height", height)
    x_scale.domain(data.map((d) => d.Name);
    y_scale.domain([0, d3.max(data, (d) => d.Population)]);
    
    const width = 960, height = 500
    const x_scale = d3.scaleBand().range([0, width]).padding(0.1)
    const y_scale = d3.scaleLinear().range([height, 0])

    const svg = d3.select("#d3_demo").attr("width", width).attr("height", height)

    d3.json("https://raw.githubusercontent.com/iamspruce/intro-d3/main/nigeria-states.json")
    .then(({ data }) => {
        data.forEach((d) => d.Population = +d.info.Population)

        x_scale.domain(data.map((d => d.Name)))
        y_scale.domain([0, d3.max(data, (d) => d.Population)])

        svg.selectAll("rect").data(data).join("rect").attr("class", "bar").attr("x", (d) => x_scale(d.Name)).attr("y", (d) => y_scale(d.Population)).attr("width", x_scale.bandwidth()).attr("height", (d) => height - y_scale(d.Population))
    })*/

</script>
</html>